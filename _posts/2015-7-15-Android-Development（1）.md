---
layout: post
title: "防止数组越界的一个好的方法 "
date: 2015-7-15
categories: Android
tags: [Android，开发]
---
防止数组越界的一个好的方法

<!-- more -->

今天重新修改简易图片浏览器的那个项目的“上一张图片”，跟"下一张图片"的功能的时候，也学到了一个比较好的东西，很惭愧，之前竟然不知道这个方法，其实，我这个只是一个小项目，只是自己定义了一个数组，把5张图片放了进去（其实也可以放更多的，自己定义好就行了的），就先举例“下一张图片”的这个功能吧

### 1，刚开始的做法是这样的：

先在前边定义好currentImage的初始值，

          currentImage=2；//这个就是刚进入应用界面的时候，看到让ImageView1的第一张图片就是数组的第二张图片

其原理就是调用这个方法：

       image1.setImageResource(images[++currentImage % images.length]);

然后就可以实现加下去了，而且为了防止数组越界，可以在程序里边定义一个判断语句，进行判断当你当前的currentImage的值：

    currentImage>4的时候，

就让

    currentImage=-1；//这样就可以实现自加下去了

（缺点：就是当你定义“上一张图片”这个功能，进行自减的时候，这里要是判断currentImage<0的时候，让currentImage=5的话，这样感觉很麻烦）

### 2.推荐的一种做法：

先在前边定义好：

     private int currentImage = Integer.MAX_VALUE / 2; 

（注释：这里的Integer.MAX_VALUE的值为 2的31次方－1 的常量，它表示 int 类型能够表示的最大值。然后，他是有一个边界值，就是Integer.MAX_VALUE+1了之后就会变成负数了：

![](http://img-storage.qiniudn.com/15-7-15/48189607.jpg)

所以这就是这里为什么要除以2的原因了，但是除以2之后，他还是很大的一个数字，所以接下来还是跟之前差不多：继续调用这个方法，但是区别是已经不一样了的：

     image1.setImageResource(images[++currentImage % images.length]);


（注释：

这里你就不用担心数组是否越界的问题了，因为：

你的数组长度是5，然后currentImage是一个很大的数字，在这里我先假设这个数字是200（实际上远远不止），然后200%5=0,也就是相当于数组的第一张图片，然后执行自加，就这样，一直会有201，202...直到205的时候，205%5=0，这个时候就又回到了数组的第一张图片了，这个时候就已经执行了一个循环了，就是你的数组的图片已经浏览完了，又回到了原点重新浏览一遍*（当然，这个只是在我的图片很少的情况下会发生的事情），就这样，一直加上去，一直循环，然后，由于currentImage这个数字比较大，出现数组越界的可能性很小，所以这个时候就不用担心这个问题了。当然，执行“上一张图片“的功能的时候也是直接执行自减就行了。
）

